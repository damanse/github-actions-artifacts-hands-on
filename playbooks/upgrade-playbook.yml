# upgrade-playbook.yml

- name: Upgrade host
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Simulate upgrade
      ansible.builtin.debug:
        msg: "Upgrading {{ target_host }}"

    - name: Pause for a random time between 1 and 5 minutes
      ansible.builtin.pause:
        minutes: "{{ lookup('random', '1,5') }}"

    - name: Simulate random failure with 25% chance
      ansible.builtin.fail:
        msg: "Simulated failure occurred!"
      when: lookup('random', '1,4') | int == 1